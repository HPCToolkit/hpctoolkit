# -*-Mode: makefile;-*-

#############################################################################
##
## File:
##   $HeadURL$
##
## Description:
##   Include file for package Makefile.in
## 
##   *Assumes presence of Automake variables!*
##
#############################################################################

#############################################################################
# HPCTOOLKIT Components and Settings
#############################################################################

############################################################
# Local includes
############################################################

HPC_IFLAGS = -I@abs_top_srcdir@/src

############################################################
# Local libraries
############################################################

# Linking dependencies:
#   HPC_LIBBANALYSIS : HPC_LIBPROFXML...
#   HPC_LIBBANAL     : HPC_LIBPROF HPC_LIBBINUTILS
#   HPC_LIBPROF      : HPC_LIBBINUTILS HPC_LIBSUPPORT
#   HPC_LIBPROFXML   : HPC_LIBPROF HPC_LIBBINUTILS HPC_LIBSUPPORT
#   HPC_LIBPROFLEAN  :
#   HPC_LIBBINUTILS  : HPC_LIBISA HPC_LIBSUPPORT
#   HPC_LIBISA       : HPC_LIBSUPPORT
#   HPC_LIBXML       : HPC_LIBSUPPORT
#   HPC_LIBSUPPORT   :

HPC_LIBANALYSIS = $(top_builddir)/src/lib/analysis/libHPCanalysis.la
HPC_LIBBANAL    = $(top_builddir)/src/lib/banal/libHPCbanal.la
HPC_LIBPROF     = $(top_builddir)/src/lib/prof/libHPCprof.la
HPC_LIBPROFXML  = $(top_builddir)/src/lib/profxml/libHPCprofxml.la
HPC_LIBPROFLEAN = $(top_builddir)/src/lib/prof-lean/libHPCprof-lean.la
HPC_LIBBINUTILS = $(top_builddir)/src/lib/binutils/libHPCbinutils.la
HPC_LIBISA      = $(top_builddir)/src/lib/isa/libHPCisa.la
HPC_LIBXML      = $(top_builddir)/src/lib/xml/libHPCxml.la
HPC_LIBSUPPORT  = $(top_builddir)/src/lib/support/libHPCsupport.la


############################################################
# 
############################################################

# arguments: ($1: binary)
define HPC_isBinaryStaticallyLinked =
  if ldd "$1" | ${GREP} ".so" >/dev/null 2>&1 ; then \
    true ; \
  fi ; \
  false
endef


# arguments: ($1: from) ($2: to)
define HPC_moveIfStaticallyLinked =
  if $(call HPC_isBinaryStaticallyLinked,"$1") ; then \
    mv -f "$1" "$2" ; \
  fi
endef

#############################################################################
