<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

  <title>manual document</title>

  <link rel='stylesheet' type='text/css' href='styleForMan.css'>
</head>

<body>

<!-- ********************************************************************** -->

<a name="top"></a>
<h2>Introduction</h2>

<p>This interface consists of a set of html files and javascript
functions which were generated by the HPCView tool. Here follows a
description of the interface frameset generated by HPCView, its
components and how to navigate the information displayed. The
interface contains several panes: </p>

<div class="indent">
  <dl>
    <dt> <a href="#titleframe">Title Frame</a></dt>
    <dd> The pane at the top displays the database's title.</dd>
    <dt> <a href="#files">Files Pane</a></dt>
    <dd> The pane on the left contains the list of files for which HPCView
 generated performance information.</dd>
    <dt> <a href="#source_files">Source File Pane</a></dt>
    <dd> The pane on the upper right contains the currently 'selected' 
 source file.</dd>
    <dt> <a href="#scopestable">Scope Hierarchy Display</a></dt>
    <dd> the pane at the bottom shows inclusive performance statistics for
 the program, source files, procedures, and source lines.</dd>
  </dl>
</div>

<!-- ********************************************************************** -->

<a name="interface"></a>
<h2>The Interface</h2>

<div class="indent">

<a name="titleframe"></a>
<h3>The Title frame</h3>

<p>The title pane contains the databases's title and two links. The
'Help' link on the right displays this manual. The
<span class="hrefPs">Reset</span> link on the left reloads all files
without disturbing the current selection and position in the scope
tree hierarchical display. The <span class="hrefPs">Restart</span> 
link reloads the entire frameset from scratch. See
<a href="#hints">Warning about clicking on links while loading</a> </p>
  
<a name="files"></a>
<h3>Files Pane</h3>

<p>The Files pane lists all files for which performance information is
known.  It contains a list of files for which the source code is known
grouped together according to the directories that contain them and a
list of files in alphabetical order for which the HPCView tool could
not find the source. Clicking on a file will show this file in the
Source File Pane.
</p>


<a name="source_files"></a>
<h3>Source File Pane</h3>

<p>This pane displays one of the instrumented source files. Lines are
numbered from 1 to n. Lines for which performance information can be
found in the performance and scope hierarchy tables have their line
number shown in <span class="hrefPs">blue.</span> Clicking on a
<span class="hrefPs">blue</span> line number will autoscroll the
scope hierarchy display (described below) to display the performance
metric informaition associated with that line. When a hyperlink
associated with both source and performance data is selected, a line
in the source display, and one or more lines in the scope hierarchy
display will be highlighted.
</p>     

<p>If the HPCView tool finds performance information about lines in a
file for which it can not locate the source file it generates a file
synopsis.  The synopsis contains three lines for each of the file's
procedures, which are generated according to the following scheme:

<blockquote>
<pre>     
&lt;line&gt;    &lt;subroutine name&gt;
             ...
&lt;line&gt;    end &lt;subroutine name&gt;
</pre>
</blockquote>

<p>HPCView uses the lowest source line number for which it found
hardware performance information in one of the hardware profiles that
it read as the subroutine's start line and the highest number for the
subroutine's ending line.
</p>


<a name="scopestable"></a>
<h3>Scope Hierarchy Display</h3>

<p>The scope hierarchy display appears as a set of panes in the
bottom half of the browser window. This display enables browsing
of a hierarchical view of the program performance metrics and its
mapping to components of the program. The information
about the program performance is organized into a tree structure known
as a scope tree. At the top of the hierarchy (the root of the tree) is
the program itself. At deeper levels of in the scope tree are files,
procedures, loops, and finally (at the leaves) non-loop source
lines.
</p>

<p>This display consists of three frames. The top frame contains the
column headers, and metric summary information for the entire
program. The middle frame shows a currently selected scope (a node in
the scope tree) and the appropriate ancestor of the current
scope. The bottom pane shows the appropriate descendants of the
current scope. Normally, the ancestor shows the parent of the current
scope, and the descendants show the children of the current
scope. Nodes displayed in the hierarchical scope tree display
correspond to program elements that contain at least one
non-empty value for one of the displayed hardware metrics.
</p>

<p>When an HPCView performance database is first opened with a
browser, the scope hierarchy table display shows the program selected
as the current scope with the program's files as the child scopes. To
examine the performance information for a particular file, click on
the
<img src="uparrow.gif" alt="uparrow" border="0" height="12" width="11">
in front of its name and the scope panes will navigate to display  the
selected file the 'Current' scope, its procedures as  'Descendants'
, and the program information in its 'Ancestor'  row. In general
clicking on the
<img src="downarrow.gif" alt="downarrow" border="0" height="12" width="11">
or
<img src="uparrow.gif" alt="uparrow" border="0" height="12" width="11">
character at the beginning of a row, makes that scope the
'Current Scope' and shows its parent and child scopes in the
other lines in the display. Each item of 
<span class="hrefPs">blue</span> text in the scopes display
corresponds to a hyperlink that can be used to autoscroll the source
display to the matching file and line associated with the hyperlink.
</p>

<p>The descendant scopes shown in the scope hierarchy display are
presented in descending order, sorted according to the performance
metric whose column header is marked <span class="sortedPs">sorted</span>.
The data in the scope hierarchy display
and the performance table can be sorted by another metric by clicking
on the <span class="hrefPs">sort</span> link of the metric's column
header.
</p>

<p>Support for horizontal scrolling of data in the hierarchical scope
display was added in HPCView 3.0 and we verified it works with the following 
browsers: Internet Explorer 5.0+, Netscape 6.2+, Mozilla 1.0+.
If you have only a Netscape 4.x browser, we suggest using HPCView to
construct a performance database for only modest number of metrics
(e.g. 4 or less) at the same time.  
</p>

<p>When HPCView generates the hierarchical scope display it uses its
configuration file to determine which profile files contain hardware
metric information and what to call these metrics in the display. It
uses the display names as column headers and the metric values to fill
in data for scopes in the display. 
</p>

<p>If HPCView can not find the source file for a procedure's lines  mentioned
in a profile, HPCView will summarize the metrics for this procedure  and
associate them with a procedure synopsis in the source pane. Metrics are
summarized by adding metric values of all lines in a subroutine. 
</p>


<a name="navigation"></a>
<h3>Navigating the Information</h3>

<p>At any time you may select a source line in the interface. You do
so by either selecting a <span class="hrefPs">blue</span> line number
in the source pane or a <span class="hrefPs">blue</span> hyperlink
field in the in the "Program Location" column of the scope hierarchy
display. The selected line is highlighted by the interface and the
scope hierarchy display scrolls so that metrics for the selected line
are visible. If you now select another line, the highlighting in
source file pane, and the scopes hierarchy display shifts to the new
location.
</p>

<p>To the left of the hierarchical display of the scope tree are diagrams 
that may be selected to adjust the view of the scope hierarchy by "flattening"
or "unflattening" the descendants of the current scope. Flattening the current
scope, accomplished by clicking on the

<img src="flatten.gif" alt="flatten" height="18" width="56">

icon, replaces each non-leaf scope shown in the descendants pane with
its  children. Leaf scopes cannot be flattened, but they are retained in
the flattened display. Progressive unflattening, by selecting the

<img src="unflatten.gif" alt="unflatten" height="18" width="56">

icon, reverses the process until the descendants pane shows only children
of the current scope. 
</p>

<p>Flattening is useful for top-down performance analysis. When
tuning the performance of a scientific program, the most important question
is where is the most costly loop in the program. At the top level, files
are displayed as children of the program. By flattening, one can switch to
a lower level view of the program as a set of procedures. However, knowing
the cost of each procedure still doesn't tell us which contains the most
costly loop. By flattening one level further, all top-level loops can be
viewed as peers and with the most costly one at the top of the display. The
interface supported by HPCView allows a user to navigate through the scope
tree, apply flattening at any level of the tree, and retain information about
all levels of flattening applies to enclosing scopes. 
</p>

<p>By selecting different lines from a particular code section you can
investigate that section's performance. By selecting the location
fields of rows with high performance metric values you can bring up
the corresponding source code associated with these metric values.
</p>

</div> <!-- class=indent -->

<!-- ********************************************************************** -->

<a name="browser"></a>
<h2>Browser configuration</h2>

<p>HPCView generates valid HTML 4.0 Transitional/Frameset and 
CSS2 style sheets.  (The one exception to valid HTML is that in order to
support the older Netscape 4 browsers, we have had to enclose
<code>&lt;img&gt;</code> elements within the
<code>&lt;pre&gt;&lt;/pre&gt;</code> tags.)  We have tested the
generated databases with <b>Netscape Navigator 4.x, Netscape 6 and
7</b> and <b>Internet Explorer 5.x and 6</b>. We recommend using one
of the recent browsers.  Our experience is that Navigator works faster to
navigate the data bases.</p>

<p>The top level window is a set of frames. Their relative sizes may
be adjusted by clicking the middle button on a frame border and
dragging it to increase/decrease frame sizes. </p>

<p>Fonts used in the HPCView interface are controlled by a document
style sheet. Unfortunately, the font size can't easily be adjusted
without throwing the scope hierarchy frames out of alignment because
of the use of images.</p>

<!-- ********************************************************************** -->

<a name="hints"></a>
<h2>Troubleshooting</h2>

<p>We recommend waiting until all files are completely loaded before
clicking any links. Clicking on links before all data is loaded in any
pane may interrupt loading and result in an incomplete setup. If this
causes problems, the <span class="hrefPs">Reset</span> link on the
left side of the title frame can be used to reload all files without
disturbing the current selection and position in the scope tree
hierarchical display. If this does not solve the problem, the
<span class="hrefPs">Restart</span> link on the left side of the title
frame will reload the entire frameset from scratch.  </p>

</body>
</html>
